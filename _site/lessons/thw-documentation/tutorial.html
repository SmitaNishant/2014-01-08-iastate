<!DOCTYPE html>
<html>
  <head>
    <link rel="shortcut icon" type="image/x-icon" href="../../favicon.ico" />
<link href="../../css/bootstrap/bootstrap.css" rel="stylesheet" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link href="../../css/bootstrap/bootstrap-responsive.css" rel="stylesheet" />
<link rel="stylesheet" type="text/css" href="../../css/swc.css" />
<link rel="stylesheet" type="text/css" href="../../css/swc-bootstrap.css" />
<link rel="alternate" type="application/rss+xml" title="The Software Carpentry Blog" href="/feed.xml"/>
<meta http-equiv="last-modified" content="" />
<!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
<!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

  </head>
  <body>
    <div class="container">
      <div class="banner">
  <a href="http://software-carpentry.org" title="Software Carpentry">
    <img alt="Software Carpentry banner" src="../../img/software-carpentry-banner.png" />
  </a>
</div>


      <div class="row-fluid">
        <div class="span10 offset1">
          <h1>Documentation</h1>
          <p><strong>Material by Anthony Scopatz</strong></p>

<p>Just like version control and testing, documenting your code is the most
important thing you can do as a software developer. As we have seen in
previous sessions with other tools, good documentation is a sublime
experience that should permeate your code.</p>

<p>Documentation is important because it is <a href="http://blip.tv/pycon-us-videos-2009-2010-2011/pycon-2011-writing-great-documentation-4899042">the only way that 90% of
people will ever interact with you or your
code</a>.
In fact, it is the only way that scales up; there are only so many
emails that you can write.</p>

<p>What is disturbing is that documentation is a forgotten after thought
for most developers. It turns out that being able to write software and
being able to write in your primary spoken language are different
skills. Luckily, we are academics so it is in our nature to publish /
write. We have no excuse for bad documentation.</p>

<p><strong>The Many Stages of Documentation:</strong></p>

<ol>
<li> Readmes</li>
<li> User Guides</li>
<li> Developer Guides</li>
<li> Self-Documenting Code</li>
<li> Code Comments</li>
<li> API Documentation</li>
<li> Auto-Documentation</li>
</ol>

<h2>Readmes</h2>

<p>The omnipresent <code>README</code> file is typically a plain text file that sits
next to the code. They typically may contain markup but are often quite
terse. The point of a readme file is to provide only the most basic of
information to the user / developer.</p>

<p>Readme files are so common that GitHub will render and display the
readme file for all directories whenever you are browsing a source tree.
Even Linux itself has a readme:</p>

<blockquote>
<p>Linux kernel release 3.x <a href="http://kernel.org/">http://kernel.org/</a></p>

<p>These are the release notes for Linux version 3. Read them carefully,
as they tell you what this is all about, explain how to install the
kernel, and what to do if something goes wrong.</p>

<p>WHAT IS LINUX?</p>

<p>Linux is a clone of the operating system Unix, written from scratch
by Linus Torvalds with assistance from a loosely-knit team of
hackers across the Net. It aims towards POSIX and Single UNIX
Specification compliance.</p>

<p>It has all the features you would expect in a modern fully-fledged
Unix, including true multitasking, virtual memory, shared libraries,
demand loading, shared copy-on-write executables, proper memory
management, and multistack networking including IPv4 and IPv6.</p>

<p>It is distributed under the GNU General Public License - see the
accompanying COPYING file for more details.</p>

<p>...</p>
</blockquote>

<h2>User&#39;s Guides</h2>

<p>The next level of documentation are user&#39;s guides. These often take the
form of books or pdfs that aim to explain top level architecture and
functionality to possibly novice users. Such documents are extremely
helpful for bringing in new members to the community, going in depth
into the theory (math, biology, physics, chemistry, engineering), and as
a reference manual for advanced users and developers. However because of
their high level nature, you typically have to wait until the code has
stabilized to be able to write a good comprehensive user&#39;s guide.</p>

<p><strong>Examples:</strong>
<a href="http://flash.uchicago.edu/site/flashcode/user_support/flash4b_ug.pdf">FLASH</a>,
<a href="http://www.tramy.us/numpybook.pdf">NumPy</a>.</p>

<h2>Developer Guides</h2>

<p>Developer guides are very similar to user&#39;s guides except that they
assume a basic mastery of the project. They are typically for people who
want to <em>become</em> developers on a project rather than for existing
developers. They are probably most important for code projects that have
plugin architectures and where the line between user and developer is
less well defined.</p>

<p><strong>Examples:</strong> <a href="http://developer.android.com/guide/index.html">Android</a>,
<a href="http://docs.python.org/devguide/">Python</a>.</p>

<h2>Self-Documenting Code</h2>

<p>Much like in testing where you can simply write perfect code the first
time, there is an analogous philosophy is documentation. This is the
philosophy of <a href="http://c2.com/cgi/wiki?SelfDocumentingCode">self-documenting
code</a>. This ethos makes the
claim that it is often possible to write code in such a way that new
readers can understand what the code does simply by reading it.
Therefore, no extra documentation is required. It is all there in the
code itself.</p>

<p>While there are obvious pitfalls with this approach (assumed knowledge
on the reader&#39;s behalf, unavoidable complexities, etc) there are some
merits. By having meaningful naming conventions and structure it does
become possible to infer a lot about a code just by glancing at it.
Coding standards come from the same desire to have readable software.</p>

<p>However using this documentation strategy exclusively is <em>highly</em>
inadvisable.</p>

<h2>Code Comments</h2>

<p>Every language has a special character (or two) which indicate to the
parser, compiler, or interpreter that whatever comes after or between
these characters should be ignored. This allows the author to write
annotate and explain the code that they are writing <em>right at the point
that they are writing it!</em> This is especially helpful if something
weird, obtuse, or obscure is about to happen because it gives the author
a chance to explain themselves to future developers (often themselves in
1, 2, 6 months).</p>

<p>The best part is that you can put literally <em>anything</em> in comments:
publication citations, ASCII art, messages to lost loves, and threats to
your collaborators.</p>

<p>In Python, the comment character is the hash symbol <code>#</code>. The following
example shows how you might help explain a toaster:</p>
<div class="highlight"><pre><code class="python language-python" data-lang="python"><span class="k">def</span> <span class="nf">toast</span><span class="p">(</span><span class="n">slices</span><span class="p">,</span> <span class="n">toastiness</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="c"># make sure the toaster has the right setting</span>
    <span class="n">toastiness</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">toastiness</span><span class="p">)</span> <span class="k">if</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="n">toastiness</span> <span class="k">else</span> <span class="mi">5</span>

    <span class="k">print</span> <span class="s">&quot;Engage the bread warming!&quot;</span>
    <span class="k">for</span> <span class="nb">slice</span> <span class="ow">in</span> <span class="n">slices</span><span class="p">:</span>
        <span class="nb">slice</span><span class="o">.</span><span class="n">toast</span><span class="p">(</span><span class="n">toastiness</span><span class="p">)</span>

    <span class="c"># log the message, making a default if needed</span>
    <span class="k">if</span> <span class="n">msg</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s">&quot;Toasted to level {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">toastiness</span><span class="p">)</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</code></pre></div>
<p>However, it is certainly possible to over-document your code with
comments. Comments should never simply repeat what the code itself is
doing. The goal is to strike the right balance. The appropriate ratio
changes with language. (Typically higher level languages have greater
functionality per line and so have more comments.) Try to avoid the
following:</p>
<div class="highlight"><pre><code class="python language-python" data-lang="python"><span class="c"># init a to 0</span>
<span class="n">a</span> <span class="o">=</span> <span class="mi">0</span>

<span class="c"># make b &#39;a string&#39;</span>
<span class="n">b</span> <span class="o">=</span> <span class="s">&#39;a string&#39;</span>

<span class="c"># Add one to a</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="mi">1</span>

<span class="c"># stopping excessive comments</span>
<span class="bp">self</span><span class="o">.</span><span class="n">fall_on_sword</span><span class="p">()</span>
</code></pre></div>
<h2>API Documentation</h2>

<p>The application programming interface (API) is the definition of the
protocol that two pieces of code may use to interact with one another.
Consider the case of functions. All functions have a function signature
which specifies how many arguments they accept and their return values.
This signature along with the module name and function name is the API.
(The function object/pointer itself is the implementation and is
independent of the abstract API.)</p>

<p>Just because you have an argument list, however, does not imply that the
meaning of the arguments is known. For example:</p>
<div class="highlight"><pre><code class="python language-python" data-lang="python"><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
    <span class="o">...</span>
</code></pre></div>
<p>We know that <code>f()</code> accepts two argument <code>a</code> and <code>b</code> and that <code>b</code> should
probably be an integer. But what does <code>f()</code> actually do? What do these
arguments mean in this context?</p>

<p>Python allows the user to define API documentation right at the
function, class, module, or variable definition. Every Python object may
have an <code>__doc__</code> attribute which is a string representation of the API
docs. This is known as a <em>docstring</em>.
<a href="http://www.python.org/dev/peps/pep-0257/">PEP257</a> describes the
conventions for docstrings. The most important of these is that simple
things should have simple docstrings.</p>

<p>Right below a definition, if the first non-comment, non-whitespace line
is an unassigned string literal, then this string is automatically
loaded in as the docstring. It is this docstring which then read by the
<code>help()</code> built-in or the <code>?</code> in IPython.</p>
<div class="highlight"><pre><code class="python language-python" data-lang="python"><span class="k">def</span> <span class="nf">mean</span><span class="p">(</span><span class="n">numlist</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Computes the mean of a list of numbers.&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">total</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">numlist</span><span class="p">)</span>
        <span class="n">length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">numlist</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&quot;The number list was not a list of numbers.&quot;</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&quot;There was a problem evaluating the number list.&quot;</span>
    <span class="k">return</span> <span class="n">total</span><span class="o">/</span><span class="n">length</span>


<span class="k">def</span> <span class="nf">fib</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Determines the nth Fibonacci number where n is </span>
<span class="sd">    a non-negative integer.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="nb">int</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">!=</span> <span class="n">n</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">NotImplemented</span>
    <span class="k">elif</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">n</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">fib</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">fib</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span>

<span class="k">print</span> <span class="n">help</span><span class="p">(</span><span class="n">mean</span><span class="p">)</span>
<span class="k">print</span> <span class="n">fib</span><span class="o">.</span><span class="n">__doc__</span>
</code></pre></div>
<p>Most Python docstrings are written in a markup language called
<a href="http://sphinx.pocoo.org/rest.html">reStructuredText</a> (rST). It is
designed to be easy to read, extensible, and provide enough
natural-looking syntax to be able to render nicely. For example, our
toaster docstring might look like:</p>
<div class="highlight"><pre><code class="python language-python" data-lang="python"><span class="k">def</span> <span class="nf">toast</span><span class="p">(</span><span class="n">slices</span><span class="p">,</span> <span class="n">toastiness</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Toast some bread.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    slices : sequence of instance of partial bread</span>
<span class="sd">        Slices to toast to toastiness level</span>
<span class="sd">    toastiness : int</span>
<span class="sd">        The desired toaster setting</span>
<span class="sd">    msg : str, optional</span>
<span class="sd">        A message for the toaster&#39;s usage log.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c"># make sure the toaster has the right setting</span>
    <span class="n">toastiness</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">toastiness</span><span class="p">)</span> <span class="k">if</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="n">toastiness</span> <span class="k">else</span> <span class="mi">5</span>

    <span class="k">print</span> <span class="s">&quot;Engage the bread warming!&quot;</span>
    <span class="k">for</span> <span class="nb">slice</span> <span class="k">if</span> <span class="n">slices</span><span class="p">:</span>
        <span class="nb">slice</span><span class="o">.</span><span class="n">toast</span><span class="p">(</span><span class="n">toastiness</span><span class="p">)</span>

    <span class="c"># log the message, making a default if needed</span>
    <span class="k">if</span> <span class="n">msg</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s">&quot;Toasted to level {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">toastiness</span><span class="p">)</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</code></pre></div>
<h2>Auto-Documentation</h2>

<p>Automatic documentation is the powerful concept that the comments and
docstrings that the developer has already written can be scraped from
the code base and placed on a website or into a user&#39;s guide. This
significantly reduces the overhead of having to write and maintain may
documents which contain effectively the same information.</p>

<p>Probably the three most popular auto-doc projects are
<a href="http://www.oracle.com/technetwork/java/javase/documentation/index-jsp-135444.html">javadoc</a>
for Java, <a href="http://www.stack.nl/%7Edimitri/doxygen/">dOxygen</a> for most
compiled languages, and <a href="http://sphinx.pocoo.org/">sphinx</a> for Python.</p>

<p>You can build the sphinx documentation by running the following command
and then navigating to the browser:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">make html
</code></pre></div>
<p>Note, that sphinx also allows you to build to other front ends, such as
LaTeX.</p>

<p><strong>Example:</strong> Let&#39;s take a tour of sphinx now!</p>

<h2>Exercise</h2>

<p>Add docstrings to the functions in the <code>close_line.py</code> module. Then,
using sphinx, generate a website which auto-documents this module.</p>

	</div>
      </div>

      <div class="footer">
  <a class="label swc-blue-bg" href="https://www.facebook.com/SoftwareCarpentry">Facebook</a>
  <a class="label swc-blue-bg" href="https://plus.google.com/u/0/114244759874490019250/posts">Google+</a>
  <a class="label swc-blue-bg" href="https://twitter.com/swcarpentry">Twitter</a>
  <a class="label swc-blue-bg" href="https://github.com/swcarpentry">GitHub</a>
  <a class="label swc-blue-bg" href="http://software-carpentry.org/feed.xml">RSS</a>
  <a class="label swc-blue-bg" href="../../license.html">License</a>
  <a class="bugreport label swc-blue-bg" href="mailto:info@software-carpentry.org?subject=bug%20in%20lessons/thw-documentation/tutorial.md">Bug Report</a>
</div>

    </div>
    <!-- Le javascript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="../../js/jquery-1.9.1.min.js"></script>
<script src="../../js/bootstrap/bootstrap.min.js"></script>

  </body>
</html>
