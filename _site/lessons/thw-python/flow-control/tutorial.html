<!DOCTYPE html>
<html>
  <head>
    <link rel="shortcut icon" type="image/x-icon" href="../../../favicon.ico" />
<link href="../../../css/bootstrap/bootstrap.css" rel="stylesheet" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link href="../../../css/bootstrap/bootstrap-responsive.css" rel="stylesheet" />
<link rel="stylesheet" type="text/css" href="../../../css/swc.css" />
<link rel="stylesheet" type="text/css" href="../../../css/swc-bootstrap.css" />
<link rel="alternate" type="application/rss+xml" title="The Software Carpentry Blog" href="/feed.xml"/>
<meta http-equiv="last-modified" content="" />
<!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
<!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

  </head>
  <body>
    <div class="container">
      <div class="banner">
  <a href="http://software-carpentry.org" title="Software Carpentry">
    <img alt="Software Carpentry banner" src="../../../img/software-carpentry-banner.png" />
  </a>
</div>


      <div class="row-fluid">
        <div class="span10 offset1">
          <h1>Flow Control in Python</h1>
          <p><strong>Based on materials by Milad Fatenejad and Katy Huff</strong></p>

<h1>Pasting into IPython</h1>

<p>This part of the lesson includes a lot of text, but it will be useful to
run it yourself in IPython.</p>

<p>To paste text from another application (i.e. these lecture notes) into
IPython :</p>

<ol>
<li> select text from the wiki</li>
<li> copy with <strong>ctrl+c</strong></li>
<li> in IPython, type <code>%paste</code></li>
</ol>

<p>The code should paste and execute in IPython.</p>

<p>If you also type %autocall to turn autocall OFF, you may be able to
paste with <strong>ctrl+v</strong> though this won&#39;t work with all IPython builds.</p>

<h1>Conditionals</h1>

<p>A conditional (if statement) is some statement that in general says :
&quot;When some boolean is true, do the following. Elsewise, do this other
thing.&quot;</p>

<p>Many equivalence test statements exist in Python that are similar in
other languages:</p>
<div class="highlight"><pre><code class="python language-python" data-lang="python"><span class="n">i</span><span class="o">=</span><span class="mi">1</span>
<span class="n">j</span><span class="o">=</span><span class="mi">2</span>
<span class="n">i</span><span class="o">==</span><span class="n">j</span> <span class="c"># i is equal to j : FALSE</span>
<span class="n">i</span><span class="o">&lt;</span><span class="n">j</span>  <span class="c"># i is less than j</span>
<span class="n">i</span><span class="o">&lt;=</span><span class="n">j</span> <span class="c"># i is less than or equal to j : TRUE</span>
<span class="n">i</span><span class="o">&gt;</span><span class="n">j</span>  <span class="c"># i is greater than j</span>
<span class="n">i</span><span class="o">&gt;=</span><span class="n">j</span> <span class="c"># i is greater than or equal to j : FALSE</span>
<span class="n">i</span><span class="o">!=</span><span class="n">j</span> <span class="c"># i is not equal to j : TRUE</span>
</code></pre></div>
<p>However, python has other equivalence test statements that are fairly
unique to python. To check whether an object is contained in a list :</p>
<div class="highlight"><pre><code class="python language-python" data-lang="python"><span class="n">beatle</span><span class="o">=</span><span class="s">&quot;John&quot;</span>
<span class="n">beatles</span><span class="o">=</span><span class="p">[</span><span class="s">&quot;George&quot;</span><span class="p">,</span> <span class="s">&quot;Ringo&quot;</span><span class="p">,</span><span class="s">&quot;John&quot;</span><span class="p">,</span> <span class="s">&quot;Paul&quot;</span><span class="p">]</span>
<span class="k">print</span> <span class="n">beatle</span> <span class="ow">in</span> <span class="n">beatles</span> <span class="c"># is John one of the beatles? : TRUE</span>
<span class="k">print</span> <span class="s">&quot;Katy&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">beatles</span> <span class="c"># this is also TRUE. </span>
</code></pre></div>
<p>The <code>is</code> keyword tests if two variables refer to the same object. For example:</p>
<div class="highlight"><pre><code class="python language-python" data-lang="python"><span class="n">a</span> <span class="o">=</span> <span class="mi">1234</span>
<span class="n">b</span> <span class="o">=</span> <span class="mi">1234</span>
<span class="n">a</span> <span class="o">==</span> <span class="n">b</span> <span class="c"># True, they have the same value</span>
<span class="n">a</span> <span class="ow">is</span> <span class="n">b</span> <span class="c"># False, are different objects</span>
</code></pre></div>
<p>It is a common mistake to use <code>is</code> to test for equality between two objects, see the code below.  This only works for a small range of integers and strings in CPython, and is a side effect of the implementation that should <strong>not</strong> be relied upon.</p>
<div class="highlight"><pre><code class="python language-python" data-lang="python"><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">b</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">a</span> <span class="ow">is</span> <span class="n">b</span> <span class="c"># True - special case for 1</span>
</code></pre></div>
<p>A correct use of <code>is</code> would be to compare objects like lists, for example the same list could be inserted into two different dictionaries. A comparison with <code>is</code> would reveal this:</p>
<div class="highlight"><pre><code class="python language-python" data-lang="python"><span class="n">number_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">8</span><span class="p">]</span>
<span class="n">dict1</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;thing_widths&quot;</span><span class="p">:</span><span class="n">number_list</span><span class="p">}</span>
<span class="n">dict2</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;item_costs&quot;</span><span class="p">:</span><span class="n">number_list</span><span class="p">}</span>
<span class="n">dict1</span><span class="p">[</span><span class="s">&quot;thing_widths&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="n">dict2</span><span class="p">[</span><span class="s">&quot;item_costs&quot;</span><span class="p">]</span>  <span class="c"># True - this is the same list</span>
</code></pre></div>
<p>Note that since the two dictionary values are actually the same object, modifying the list in one of the dictionaries will mean that the values in both dictionaries will change:</p>
<div class="highlight"><pre><code class="python language-python" data-lang="python"><span class="k">print</span> <span class="n">dict1</span><span class="p">,</span> <span class="n">dict2</span>
<span class="n">dict1</span><span class="p">[</span><span class="s">&quot;thing_widths&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">222</span>
<span class="k">print</span> <span class="n">dict1</span><span class="p">,</span> <span class="n">dict2</span>
</code></pre></div>
<p>Conditionals (<code>if</code> statements) are also really easy to use in python. Take
a look at the following example:</p>
<div class="highlight"><pre><code class="python language-python" data-lang="python"><span class="n">i</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">sign</span> <span class="o">=</span> <span class="s">&quot;zero&quot;</span>
<span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
  <span class="n">sign</span> <span class="o">=</span> <span class="s">&quot;negative&quot;</span>
<span class="k">elif</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
  <span class="n">sign</span> <span class="o">=</span> <span class="s">&quot;positive&quot;</span>
<span class="k">else</span><span class="p">:</span>
  <span class="k">print</span> <span class="s">&quot;Sign must be zero&quot;</span>
  <span class="k">print</span> <span class="s">&quot;Have a nice day&quot;</span>
<span class="k">print</span> <span class="n">sign</span>
</code></pre></div>
<p>The behavior of this code snippet should be pretty clear, but there is
something peculiar. How does Python know where the if-statement ends?
Other languages, like FORTRAN, MatLab, and C/C++ all have some way of
delimiting blocks of code. For example, in MatLab you begin an if
statement with the word <code>if</code> and you end it with <code>end if</code>. In C/C++ you
delimit blocks with curly braces. Python uses <strong>indentation</strong> to delimit
code blocks. The <strong>indentation</strong> above is NOT just to make things look
pretty - it tells Python what the body of the <code>if</code>-statement is. This is
true when ever we create any code blocks, such as the bodies of loops,
functions or classes.</p>

<p><strong>Aside: Compact if-statement:</strong></p>

<p>Python has an easy to use <code>if</code>-syntax for setting the value of a variable.
Try entering this into IPython:</p>
<div class="highlight"><pre><code class="python language-python" data-lang="python"><span class="n">i</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">sign</span> <span class="o">=</span> <span class="s">&quot;positive&quot;</span> <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="s">&quot;negative&quot;</span>
</code></pre></div>
<h1>While Loops</h1>

<p>Lets start by looking at while loops since they function like while
loops in many other languages. The example below takes a list of
integers and computes the product of each number in the list up to the
-1 element.</p>

<p>A while loop will repeat the instructions within itself until the
conditional that defines it is no longer true.</p>
<div class="highlight"><pre><code class="python language-python" data-lang="python"><span class="n">mult</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="k">while</span> <span class="n">sequence</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
  <span class="n">mult</span> <span class="o">=</span> <span class="n">mult</span> <span class="o">*</span> <span class="n">sequence</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
  <span class="k">del</span> <span class="n">sequence</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="k">print</span> <span class="n">mult</span>
</code></pre></div>
<p>Some new syntax has been introduced in this example.</p>

<ul>
<li><p>On line 4, we compute the product of the elements just to make this
more interesting.</p></li>
<li><p>On line 5, we use the <code>del</code> keyword to remove the first element of
the list, shifting every element down one.</p></li>
</ul>

<p><strong>Watch Out</strong></p>

<p>Since a while loop will continue until its conditional is no longer
true, a <strong>poorly formed</strong> while loop might repeat forever. For example :</p>
<div class="highlight"><pre><code class="python language-python" data-lang="python"><span class="n">i</span><span class="o">=</span><span class="mi">1</span>
<span class="k">print</span> <span class="s">&quot;Well, there&#39;s egg and bacon, egg and spam, egg bacon and&quot;</span>
<span class="k">while</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
  <span class="k">print</span> <span class="s">&quot;spam &quot;</span>
<span class="k">print</span> <span class="s">&quot;or Lobster Thermidor a Crevette with a mornay sauce served in a Provencale manner with shallots...&quot;</span> 
</code></pre></div>
<p>Since the variable <code>i</code> never changes within the while loop, we can
expect that the conditional, <code>i==1</code> will remain true forever and the
while loop will just go round and round, as if this restaurant offered
nothing but spam. (If you try this at home, please nory, or other iterable). However, sometimes you may need the index value at the same time, for example for some calculation. The <code>enumerate</code> function generates the integer index for you, which can be used instead of the <code>range</code> function. The following two loops are equivalent:</p>
<div class="highlight"><pre><code class="python language-python" data-lang="python"><span class="n">data_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">23</span><span class="p">,</span><span class="mi">45</span><span class="p">,</span><span class="mi">67</span><span class="p">]</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data_list</span><span class="p">)):</span>
    <span class="k">print</span> <span class="n">data_list</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="s">&#39; is item number &#39;</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="s">&#39; in the list&#39;</span>

<span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">d</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">data_list</span><span class="p">):</span>
    <span class="k">print</span> <span class="n">d</span><span class="p">,</span> <span class="s">&#39; is item number &#39;</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="s">&#39; in the list&#39;</span>
</code></pre></div>
<h3>zip</h3>

<p>For iterating through multiple sequences, <code>zip</code> can be used to group them together to simultaneous pass through each sequence:</p>
<div class="highlight"><pre><code class="python language-python" data-lang="python"><span class="n">run_numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span>
<span class="n">run_times</span> <span class="o">=</span> <span class="p">[</span><span class="mf">12.1</span><span class="p">,</span> <span class="mf">33.0</span><span class="p">,</span> <span class="mf">15.1</span><span class="p">,</span> <span class="mf">22.9</span><span class="p">]</span>
<span class="n">directions</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;North&#39;</span><span class="p">,</span> <span class="s">&#39;South&#39;</span><span class="p">,</span> <span class="s">&#39;East&#39;</span><span class="p">,</span> <span class="s">&#39;NorthEast&#39;</span><span class="p">]</span>

<span class="k">for</span> <span class="n">n</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">d</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">run_numbers</span><span class="p">,</span> <span class="n">run_times</span><span class="p">,</span> <span class="n">directions</span><span class="p">):</span>
    <span class="k">print</span> <span class="n">n</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">d</span>
</code></pre></div>
<h1>Final Example</h1>

<p>We&#39;ve seen a lot so far. Lets work through a slightly lengthier example
together. I&#39;ll use some of the concepts we already saw and introduce a
few new concepts. To run the example, you&#39;ll need to locate a short file
containing phone numbers. The file can be found in your 
repository within the phonenums directory and is called phonenums.txt. 
Now we have to move IPython to that directory so it can find the
phonenums.txt file. You navigate within IPython in the same way that you
navigate in the shell, by entering &quot;cd [path]&quot; .</p>

<p>This example opens a text file containing a list of phone numbers. The
phone numbers are in the format ###-###-####, one to a line.
The example code loops through each line in the file and counts the
number of times each area code appears. The answer is stored in a
dictionary, where the area code is the key and the number of times it
occurs is the value.</p>
<div class="highlight"><pre><code class="python language-python" data-lang="python"><span class="n">areacodes</span> <span class="o">=</span> <span class="p">{}</span> <span class="c"># Create an empty dictionary</span>
<span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">&quot;phonenums.txt&quot;</span><span class="p">)</span> <span class="c"># Open the text file</span>
<span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span> <span class="c"># iterate through the text file, one line at a time (think of the file as a list of lines)</span>
    <span class="n">ac</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;-&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="c"># Split phone number, first element is the area code</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">ac</span> <span class="ow">in</span> <span class="n">areacodes</span><span class="p">:</span> <span class="c"># Check if it is already in the dictionary</span>
        <span class="n">areacodes</span><span class="p">[</span><span class="n">ac</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="c"># If not, add it to the dictionary</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">areacodes</span><span class="p">[</span><span class="n">ac</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="c"># Add one to the dictionary entry</span>

<span class="k">print</span> <span class="n">areacodes</span> <span class="c"># Print the answer</span>
</code></pre></div>
<h2>Example : Iteritems</h2>

<p>Use the iteritems dictionary method in combination with a for loop to
print the keys/values of the areacodes dictionary one to a line. In
other words, the goal is to write a loop that prints:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">203 4
800 4
608 8
773 3
</code></pre></div>
<p>This example is a little tricky to figure out, but give it a shot.</p>

	</div>
      </div>

      <div class="footer">
  <a class="label swc-blue-bg" href="https://www.facebook.com/SoftwareCarpentry">Facebook</a>
  <a class="label swc-blue-bg" href="https://plus.google.com/u/0/114244759874490019250/posts">Google+</a>
  <a class="label swc-blue-bg" href="https://twitter.com/swcarpentry">Twitter</a>
  <a class="label swc-blue-bg" href="https://github.com/swcarpentry">GitHub</a>
  <a class="label swc-blue-bg" href="http://software-carpentry.org/feed.xml">RSS</a>
  <a class="label swc-blue-bg" href="../../../license.html">License</a>
  <a class="bugreport label swc-blue-bg" href="mailto:info@software-carpentry.org?subject=bug%20in%20lessons/thw-python/flow-control/tutorial.md">Bug Report</a>
</div>

    </div>
    <!-- Le javascript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="../../../js/jquery-1.9.1.min.js"></script>
<script src="../../../js/bootstrap/bootstrap.min.js"></script>

  </body>
</html>
